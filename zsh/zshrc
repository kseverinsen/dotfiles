#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...

# Virtualenv wrapper
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper_lazy.sh
#if [[ $(command -v virtualenvwrapper_lazy.sh) ]]; then
#  source virtualenvwrapper_lazy.sh
#fi

# Autojump
source /usr/share/autojump/autojump.sh


# Neovim aliases
alias vim='nvim'
alias :e='nvim'
alias :E='nvim .'
alias :q='exit'

# Base16 Shell TODO not working on konsole
#BASE16_SHELL="$HOME/.config/base16-shell/base16-default.dark.sh"
#[[ -s $BASE16_SHELL ]] && source $BASE16_SHELL

# Find text in pdf files
# find . -name '*.pdf' -exec sh -c 'pdftotext "{}" - | grep --with-filename --label="{}" --color "speedup"' \;

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

if [ -x "$(command -v ag)" ]; then
  # Set ag as the default source for fzf (respect .gitignore etc)
  export FZF_DEFAULT_COMMAND='ag -l -g ""'
  # To apply the command to CTRL-T as well
  export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"

  # For zsh {cmd} **<tab> completion
  # Use ag instead of the default find command for listing candidates.
  # - The first argument to the function is the base path to start traversal
  # - Note that ag only lists files not directories
  # - See the source code (completion.{bash,zsh}) for the details.
  _fzf_compgen_path() {
    ag -g "" "$1"
  }
fi
